$(document).ready(function(){var e=CONFIG.algolia,a=e.applicationID&&e.apiKey&&e.indexName;if(!a)return void window.console.error("Algolia Settings are invalid.");var t=instantsearch({appId:e.applicationID,apiKey:e.apiKey,indexName:e.indexName,searchFunction:function(e){var a=$("#algolia-search-input").find("input");a.val()&&e.search()}});[instantsearch.widgets.searchBox({container:"#algolia-search-input",placeholder:e.labels.input_placeholder}),instantsearch.widgets.hits({container:"#algolia-hits",hitsPerPage:e.hits.per_page||10,templates:{item:function(e){return'<a href="'+CONFIG.root+e.path+'" class="algolia-hit-item-link">'+e._highlightResult.title.value+"</a>"},empty:function(a){return'<div id="algolia-hits-empty">'+e.labels.hits_empty.replace(/\$\{query}/,a.query)+"</div>"}},cssClasses:{item:"algolia-hit-item"}}),instantsearch.widgets.stats({container:"#algolia-stats",templates:{body:function(a){var t=e.labels.hits_stats.replace(/\$\{hits}/,a.nbHits).replace(/\$\{time}/,a.processingTimeMS);return t+'<span class="algolia-powered">  <img src="'+CONFIG.root+'images/algolia_logo.svg" alt="Algolia" /></span><hr />'}}}),instantsearch.widgets.pagination({container:"#algolia-pagination",scrollTo:!1,showFirstLast:!1,labels:{first:'<i class="fa fa-angle-double-left"></i>',last:'<i class="fa fa-angle-double-right"></i>',previous:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>'},cssClasses:{root:"pagination",item:"pagination-item",link:"page-number",active:"current",disabled:"disabled-item"}})].forEach(t.addWidget,t),t.start(),$(".popup-trigger").on("click",function(e){e.stopPropagation(),$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle(),$("#algolia-search-input").find("input").focus()}),$(".popup-btn-close").click(function(){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")})}),$(document).ready(function(){function e(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}if(0!==$("#local-search-input").size()){var a=!1,t="search.xml";0==t.length&&(t="search.xml");var i="/"+t,n=function(t,i,n){"use strict";$.ajax({url:t,dataType:"xml",async:!0,success:function(t){a=!0,$(".popup").detach().appendTo(".header-inner");var s=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),o=document.getElementById(i),l=document.getElementById(n);o.addEventListener("input",function(){var e=0,a='<ul class="search-result-list">',t=this.value.trim().toLowerCase().split(/[\s\-]+/);l.innerHTML="",this.value.trim().length>1&&s.forEach(function(i){var n=!0,s=i.title.trim().toLowerCase(),o=i.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),l=i.url,r=-1,c=-1,p=-1;if(""!=s&&""!=o&&t.forEach(function(e,a){r=s.indexOf(e),c=o.indexOf(e),r<0&&c<0?n=!1:(c<0&&(c=0),0==a&&(p=c))}),n){e+=1,a+="<li><a href='"+l+"' class='search-result-title'>"+s+"</a>";var u=i.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var d=p-20,g=p+80;d<0&&(d=0),0==d&&(g=50),g>u.length&&(g=u.length);var h=u.substring(d,g);t.forEach(function(e){var a=new RegExp(e,"gi");h=h.replace(a,'<b class="search-keyword">'+e+"</b>")}),a+='<p class="search-result">'+h+"...</p>"}a+="</li>"}}),a+="</ul>",0==e&&(a='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==t&&(a='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),l.innerHTML=a}),e()}})};$(".popup-trigger").mousedown(function(t){t.stopPropagation(),0==a?n(i,"local-search-input","local-search-result"):e()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})}});